<?php
if(isset($_POST['submit1']))
{
	$dir = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST\daily/';
	$dh = opendir($dir);
	while($file = readdir($dh))
	{
	if(!is_dir($file))
	{
	@unlink($dir.$file);
	}
	}
	closedir($dh);
	$move = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST\daily';
	$str = $_FILES['rma']['tmp_name'];
	$dir = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST\daily';
	$q = (count(glob("$dir/*.zip")) === 0) ? 'Empty' : 'Not empty';
	
	$Filenames = $_FILES['rma']['name'];
	if ($q=="Empty")
		if (strpos($Filenames, 'drar') !== False)
			{
				if ( move_uploaded_file( $_FILES['rma']['tmp_name'], $move.'/'.$_FILES['rma']['name']))
					{
						shell_exec("python C:\Users\RD1\PycharmProjects\PYTHONMAY2019\TermianlDailyOne.py");
?>
<div class="alert alert-success" role="alert">
	<center><h5>EXPORT : <?php echo($_FILES['rma']['name']) ?> SUCCESS</h5></center>
</div>
<?php
}
}
else
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>INVALID FILE ERROR</h5></center>
</div>
<?php
}
else
{
echo "FOLDER IS NOT EMPTY";
}
}
if(isset($_POST['submit1_1']))
{
$file = basename($_GET['file']);
$file = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST\export/Mastersort.xlsx'.$file;
if(!file_exists($file))
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>FILE NOT FOUND</h5></center>
</div>
<?php
}
else
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
flush(); // Flush system output buffer
readfile($file);
exit;
}
}
if(isset($_POST['submit2']))
{
$dir = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\daily/';
$dh = opendir($dir);
while($file = readdir($dh))
{
if(!is_dir($file))
{
@unlink($dir.$file);
}
}
closedir($dh);
$move = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\daily';
$str = $_FILES['PR']['tmp_name'];
$dir = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\daily';
$q = (count(glob("$dir/*.zip")) === 0) ? 'Empty' : 'Not empty';
$Filenames = $_FILES['PR']['name'];
if ($q=="Empty")
	if (strpos($Filenames, 'drar') !== False)
		{
			if ( move_uploaded_file( $_FILES['PR']['tmp_name'], $move.'/'.$_FILES['PR']['name']))
				{
					// echo 'EXPORT : ';
					// echo($_FILES['PR']['name']);
					// shell_exec("python C:\Users\RD1\PycharmProjects\PYTHONMAY2019\PRAutomation.py");
					// echo" : SUCESSS";
					shell_exec("python C:\Users\RD1\PycharmProjects\PYTHONMAY2019\TerminalDailyTwo.py");
?>
<div class="alert alert-success" role="alert">
	<center><h5>EXPORT : <?php echo($_FILES['PR']['name']) ?> SUCCESS</h5></center>
</div>
<?php
}
}
else
{
?>
<!-- <div class="FILEERROR alert alert-danger fixed-bottom" role="alert"> -->
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>INVALID FILE ERROR</h5></center>
</div>
<?php
}
else
{
echo "FOLDER IS NOT EMPTY";
}
}
if(isset($_POST['submit2_2']))
{
$file = basename($_GET['file']);
$file = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\export/Mastersort.xlsx'.$file;
if(!file_exists($file))
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>FILE NOT FOUND</h5></center>
</div>
<?php
}
else
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
flush(); // Flush system output buffer
readfile($file);
exit;
}
}
if(isset($_POST['empty_2']))
{
$file2 = basename($_GET['file']);
$file2 = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\empty/emp.xlsx'.$file2;
if(!file_exists($file2))
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>FILE NOT FOUND</h5></center>
</div>
<?php
}
else
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file2).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file2));
flush(); // Flush system output buffer
readfile($file2);
exit;
}
}









if(isset($_POST['empty']))
{
$file2 = basename($_GET['file']);
$file2 = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST WITH FOLDERS\empty/emp.xlsx'.$file2;
if(!file_exists($file2))
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>FILE NOT FOUND</h5></center>
</div>
<?php
}
else
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file2).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file2));
flush(); // Flush system output buffer
readfile($file2);
exit;
}
}


if(isset($_POST['zip']))
{
$file2 = basename($_GET['file']);
$file2 = 'C:\xampp\htdocs\Terminal\DAILY REPORT LIST\invalid/invalid.zip'.$file2;
if(!file_exists($file2))
{
?>
<div class="FILEERROR alert alert-danger" role="alert">
	<center><h5>FILE NOT FOUND</h5></center>
</div>
<?php
}
else
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file2).'"');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file2));
flush(); // Flush system output buffer
readfile($file2);
exit;
}
}







?>


<!DOCTYPE html>
<html lang="en">
	<head>
		<title>PORTAL</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
		<!-- Latest compiled and minified CSS -->

		<link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato" />

	</head>



<style>

body {
    margin: 0;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #212529;
    text-align: left;
    background-color: currentColor !important;
	}

.h4, h4 {
    font-size: 1.2rem;
    color: lightgrey;
    margin-bottom: 10px;
    font-family: raleway !important
}

.h1, h1 {
    font-size: 2.2rem;
    color: lightgrey;
    font-family: raleway !important

}

.container-fluid {
    width: 90%;
}

.form-control {
    line-height: 2;
}

.cbutton
{
	padding: 0px;
}

</style>





	<body>
			<div class="container-fluid">
			<br>
			<br>
			<center><h1>−− PORTAL AUTOMATION'S −−</h1></center>
			<br>
			<br>
				<div class="row">
					<div class="col-lg-5">
						<h4>DAILY TRANSACTION AUDIT REPORT - ZIP</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
							  <input type="file" name="rma" class="form-control cbutton">
								<!-- <div class="custom-file">
									<input type="file" class="custom-file-input" name="rma"  id="exampleInputFilerma">
									<label class="custom-file-label" for="exampleInputFilerma">Choose file</label>
								</div> -->
								<div class="input-group-append">
									<button type="submit" name ='submit1' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit1_1' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>	
									<button type="submit" name ='stop' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty' value="Send" class="btn btn-outline-warning">INVALID</button>
									<button type="submit" name ='zip' value="Send" class="btn btn-outline-info">ZIP</button>
								</div>
							</div>
						</form>
					</div>
					<div class="col-lg-2">
						<br>
						<br>
					</div>
					<div class="col-lg-5">
						<h4>ALL DAILY REPORT LIST WITH FOLDERS - ZIP</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
								 <input type="file" name="PR" class="form-control cbutton">
								<!-- <div class="custom-file">
									<input type="file" class="custom-file-input" name="PR"  id="exampleInputFilePR">
									<label class="custom-file-label" for="inputGroupFile03">Choose file</label>
								</div> -->
								<div class="input-group-append">
									<button type="submit" name ='submit2' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit2_2' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>
									<button type="submit" name ='stop_2' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty_2' value="Send" class="btn btn-outline-warning">INVALID</button>
								</div>
							</div>
						</form>
					</div>
				</div>
				<br>
				<br>
				<br>
				<div class="row">
					<div class="col-sm-5">
						<h4>FILE 3</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
								<div class="custom-file">
									<input type="file" name="PR3" class="form-control cbutton">
									<!-- <input type="file" class="custom-file-input" name="rma"  id="exampleInputFilerma">
									<label class="custom-file-label" for="inputGroupFile02">Choose file</label> -->
								</div>
								<div class="input-group-append">
									<button type="submit" name ='submit3' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit3_3' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>
									<button type="submit" name ='stop' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty' value="Send" class="btn btn-outline-warning">INVALID</button>
								</div>
							</div>
						</form>
					</div>
					<div class="col-sm-2">
						<br>
						<br>
					</div>
					<div class="col-sm-5">
						<h4>FILE 4</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
								<div class="custom-file">
									<input type="file" name="PR4" class="form-control cbutton">
									<!-- <input type="file" class="custom-file-input" name="rma"  id="exampleInputFilerma">
									<label class="custom-file-label" for="inputGroupFile02">Choose file</label> -->
								</div>
								<div class="input-group-append">
									<button type="submit" name ='submit4' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit4_4' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>
									<button type="submit" name ='stop' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty' value="Send" class="btn btn-outline-warning">INVALID</button>
								</div>
							</div>
						</form>
					</div>
				</div>
				<br>
				<br>
				<br>
				<div class="row">
					<div class="col-sm-5">
						<h4>FILE 5</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
								<div class="custom-file">
									<input type="file" name="PR5" class="form-control cbutton">
									<!-- <input type="file" class="custom-file-input" name="rma"  id="exampleInputFilerma">
									<label class="custom-file-label" for="inputGroupFile02">Choose file</label> -->
								</div>
								<div class="input-group-append">
									<button type="submit" name ='submit5' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit5_5' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>
									<button type="submit" name ='stop' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty' value="Send" class="btn btn-outline-warning">INVALID</button>
								</div>
							</div>
						</form>
					</div>
					<div class="col-sm-2">
						<br>
						<br>
					</div>
					<div class="col-sm-5">
						<h4>FILE 6</h4>
						<form enctype="multipart/form-data" method="POST">
							<div class="input-group mb-3">
								<div class="custom-file">
									<input type="file" name="PR6" class="form-control cbutton">
									<!-- <input type="file" class="custom-file-input" name="rma"  id="exampleInputFilerma">
									<label class="custom-file-label" for="inputGroupFile02">Choose file</label> -->
								</div>
								<div class="input-group-append">
									<button type="submit" name ='submit6' value="Send" class="btn btn-outline-success">PROCESS</button>
									<button type="submit" name ='submit6_6' value="Send" class="btn btn-outline-primary">DOWNLOAD</button>
									<button type="submit" name ='stop' value="Send" class="btn btn-outline-danger">STOP</button>
									<button type="submit" name ='empty' value="Send" class="btn btn-outline-warning">INVALID</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
				</body>
			</html>



